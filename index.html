<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEXA.SEAL V11.5 | Ø§Ù„Ø³ÙŠØ§Ø¯Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ© Ø§Ù„ÙƒÙ„ÙŠØ©</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&family=Noto+Sans+Arabic:wght@400;700&display=swap');
        :root { --nexa-neon: #00ffcc; --nexa-bg: #030303; --nexa-deep: #0a0a0a; }
        body { background: var(--nexa-bg); color: #fff; font-family: 'Noto Sans Arabic', sans-serif; overflow-x: hidden; }
        .nexa-card { background: var(--nexa-deep); border: 1px solid rgba(0, 255, 204, 0.1); border-radius: 2.5rem; transition: 0.5s; position: relative; overflow: hidden; }
        .nexa-card:hover { border-color: var(--nexa-neon); box-shadow: 0 0 40px rgba(0, 255, 204, 0.05); }
        .orbitron { font-family: 'Orbitron', sans-serif; }
        .glow-text { text-shadow: 0 0 10px var(--nexa-neon); }
        .tab-active { background: var(--nexa-neon); color: #000; box-shadow: 0 0 20px var(--nexa-neon); }
        .scan-anim { height: 2px; background: var(--nexa-neon); position: absolute; width: 100%; top: 0; animation: scan 3s linear infinite; opacity: 0.2; }
        @keyframes scan { 0% { top: 0; } 100% { top: 100%; } }
    </style>
</head>
<body class="p-6 md:p-12 min-h-screen">

    <div class="max-w-7xl mx-auto">
        <header class="flex flex-col md:flex-row justify-between items-center mb-16 border-b border-white/5 pb-10">
            <div class="text-right">
                <h1 class="text-6xl font-black italic orbitron tracking-tighter glow-text">NEXA<span class="text-white">.</span>SEAL</h1>
                <p class="text-[9px] tracking-[0.8em] text-cyan-500 uppercase mt-2">Universal Sovereign System V11.5 â€¢ FULL RELEASE</p>
            </div>
            <div class="mt-6 md:mt-0 flex gap-4">
                <div class="px-6 py-2 border border-white/10 rounded-full text-[10px] orbitron text-gray-400">STATUS: <span class="text-green-500 animate-pulse font-black">ENCRYPTED_LINK_ACTIVE</span></div>
            </div>
        </header>

        <div class="flex justify-center gap-6 mb-12 orbitron">
            <button onclick="switchTab('shield')" id="btnShield" class="px-10 py-4 rounded-2xl tab-active text-[11px] font-black uppercase tracking-widest transition-all">Sovereign_Shield</button>
            <button onclick="switchTab('gate')" id="btnGate" class="px-10 py-4 rounded-2xl bg-white/5 text-gray-500 text-[11px] font-black uppercase tracking-widest hover:text-white transition-all">Forensic_Gate</button>
        </div>

        <div class="grid lg:grid-cols-12 gap-10">
            <div class="lg:col-span-8">
                
                <div id="shieldWing" class="nexa-card p-12 min-h-[550px] flex flex-col justify-between">
                    <div class="scan-anim"></div>
                    <div>
                        <h3 class="orbitron text-[11px] text-[var(--nexa-neon)] mb-8 tracking-[0.4em] font-black italic underline">STEP 1: MOLECULAR_INJECTION</h3>
                        <div id="dropZone" class="border-2 border-dashed border-white/5 rounded-[3rem] py-24 text-center cursor-pointer hover:border-[var(--nexa-neon)]/40 transition-all">
                            <input type="file" id="masterIn" class="hidden">
                            <label for="masterIn" class="cursor-pointer">
                                <div class="text-8xl mb-8">ğŸ›¡ï¸</div>
                                <p id="masterLabel" class="text-sm text-gray-500 italic font-bold">Ø§Ø³Ø­Ø¨ Ø§Ù„Ø£ØµÙ„ Ø§Ù„Ø±Ù‚Ù…ÙŠ Ù„ÙØ±Ø¶ Ø§Ù„Ø³ÙŠØ§Ø¯Ø©</p>
                            </label>
                        </div>
                    </div>
                    <button onclick="processSeal()" class="mt-12 py-7 bg-[var(--nexa-neon)] text-black font-black orbitron text-xs tracking-[0.5em] rounded-3xl hover:scale-[1.02] transition-all uppercase">Execute Sovereign .NXA Seal</button>
                </div>

                <div id="gateWing" class="hidden nexa-card p-12 min-h-[550px] flex flex-col items-center">
                    <div class="text-center mb-12">
                        <div class="text-7xl mb-6">âš–ï¸</div>
                        <h2 class="orbitron text-2xl font-black italic">DECAPSULATION_CENTER</h2>
                        <p class="text-[10px] text-cyan-500 uppercase mt-2 tracking-widest font-bold">Ù†Ø¸Ø§Ù… ÙÙƒ Ø§Ù„ØªØºÙ„ÙŠÙ ÙˆØ§Ù„Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ø¬Ù†Ø§Ø¦ÙŠ</p>
                    </div>
                    
                    <input type="file" id="gateIn" class="hidden">
                    <label for="gateIn" class="w-full border-2 border-dashed border-white/5 py-20 rounded-[3rem] cursor-pointer hover:bg-white/5 transition block text-center">
                        <span class="text-xs text-gray-500 font-bold uppercase italic">Ø§Ø±ÙØ¹ Ù…Ù„Ù .nxa Ù„Ø§Ø³ØªØ­Ø¶Ø§Ø± Ø§Ù„Ø£ØµÙ„ Ø§Ù„Ø¨ØµØ±ÙŠ</span>
                    </label>

                    <div id="outputArea" class="hidden mt-10 w-full p-10 border border-[var(--nexa-neon)]/20 rounded-[3rem] bg-black/60 text-center animate-in zoom-in duration-700">
                        </div>
                </div>
            </div>

            <div class="lg:col-span-4">
                <div class="nexa-card p-8 h-full border-r-2 border-[var(--nexa-neon)]/30">
                    <h3 class="orbitron text-[11px] font-black text-[var(--nexa-neon)] mb-10 italic flex items-center gap-3">
                        <span class="w-3 h-3 bg-[var(--nexa-neon)] rounded-full animate-ping"></span>
                        SYSTEM_RADAR_LIVE
                    </h3>
                    <div id="radarFeed" class="space-y-4 text-[10px] font-mono text-gray-600 overflow-y-auto h-[450px] pr-2 custom-scrollbar">
                        <div class="text-cyan-900">> Ø§Ù„Ø¨Ø±ÙˆØªÙˆÙƒÙˆÙ„ Ø§Ù„Ø³ÙŠØ§Ø¯ÙŠ Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¹Ù…Ù„...</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let targetFile = null;
        const nexaKey = "NXA-GLOBAL-V11.5-SOVEREIGN-KEY-";

        function switchTab(t) {
            document.getElementById('shieldWing').classList.toggle('hidden', t !== 'shield');
            document.getElementById('gateWing').classList.toggle('hidden', t !== 'gate');
            document.getElementById('btnShield').className = t === 'shield' ? 'px-10 py-4 rounded-2xl tab-active text-[11px] font-black uppercase tracking-widest transition-all' : 'px-10 py-4 rounded-2xl bg-white/5 text-gray-500 text-[11px] font-black uppercase tracking-widest hover:text-white transition-all';
            document.getElementById('btnGate').className = t === 'gate' ? 'px-10 py-4 rounded-2xl tab-active text-[11px] font-black uppercase tracking-widest transition-all' : 'px-10 py-4 rounded-2xl bg-white/5 text-gray-500 text-[11px] font-black uppercase tracking-widest hover:text-white transition-all';
        }

        function addLog(m, c = 'gray') {
            const d = document.createElement('div');
            d.style.color = c; d.className = "border-r border-white/5 pr-3 mb-2";
            d.innerHTML = `> [${new Date().toLocaleTimeString()}] ${m}`;
            document.getElementById('radarFeed').prepend(d);
        }

        // --- Ù…Ø­Ø±Ùƒ Ø§Ù„Ø®ØªÙ… ÙˆØ§Ù„ØªØºÙ„ÙŠÙ ---
        document.getElementById('masterIn').onchange = (e) => {
            targetFile = e.target.files[0];
            document.getElementById('masterLabel').innerHTML = `<span class="text-white text-xl font-black">${targetFile.name.toUpperCase()}</span><br><span class="text-green-500 orbitron">DNA_READY_FOR_INJECTION</span>`;
        };

        async function processSeal() {
            if(!targetFile) return alert("ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù");
            addLog("Ø¨Ø¯Ø¡ Ø§Ù„Ø­Ù‚Ù† Ø§Ù„Ø¬ÙŠÙ†ÙŠ ÙˆØªØ³Ù…ÙŠÙ… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ...", "purple");
            
            await new Promise(r => setTimeout(r, 1500));
            const dna = Math.random().toString(36).substring(2, 15).toUpperCase();
            const header = nexaKey + dna + "-EOF-";
            
            const blob = new Blob([header, targetFile], { type: "application/nexa-secure" });
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = targetFile.name.split('.')[0] + ".nxa";
            a.click();
            addLog(`âœ… Ø§ÙƒØªÙ…Ù„ Ø§Ù„ØªØºÙ„ÙŠÙ Ø§Ù„Ø³ÙŠØ§Ø¯ÙŠ Ø¨Ù†Ø¬Ø§Ø­. DNA: ${dna}`, "var(--nexa-neon)");
        }

        // --- Ù…Ø­Ø±Ùƒ ÙÙƒ Ø§Ù„ØªØºÙ„ÙŠÙ ÙˆØ§Ù„Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ø¨ØµØ±ÙŠ ---
        document.getElementById('gateIn').onchange = (e) => {
            const f = e.target.files[0];
            const out = document.getElementById('outputArea');
            addLog("ğŸ” ÙØ­Øµ Ø¨Ù†ÙŠØ© Ø§Ù„Ù…Ù„Ù Ø§Ù„ÙˆØ±Ù‚ÙŠ .nxa...", "yellow");

            const reader = new FileReader();
            reader.onload = function(ev) {
                const buf = ev.target.result;
                const view = new Uint8Array(buf);
                const decoder = new TextDecoder();
                const headStr = decoder.decode(view.slice(0, 500));

                if(headStr.includes("NXA-GLOBAL")) {
                    addLog("âœ… ØªØ·Ø§Ø¨Ù‚ Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ø³ÙŠØ§Ø¯ÙŠ! Ø¬Ø§Ø±ÙŠ Ø§Ø³ØªØ­Ø¶Ø§Ø± Ø§Ù„ØµÙˆØ±Ø©...", "var(--nexa-neon)");
                    
                    // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø¹Ø¯ ØªØ±ÙˆÙŠØ³Ø© EOF
                    const startIdx = headStr.indexOf("-EOF-") + 5;
                    const realStart = findImageStart(view, startIdx);
                    const actualData = view.slice(realStart);
                    
                    const blob = new Blob([actualData]);
                    const url = URL.createObjectURL(blob);

                    out.classList.remove('hidden');
                    out.innerHTML = `
                        <div class="space-y-6">
                            <p class="orbitron text-[10px] text-[var(--nexa-neon)] tracking-widest font-black">ASSET_DECAPSULATED_SUCCESSFULLY</p>
                            <img src="${url}" class="mx-auto max-h-96 rounded-3xl border-2 border-[var(--nexa-neon)] shadow-2xl">
                            <div class="flex flex-col md:flex-row gap-4 justify-center mt-8">
                                <a href="${url}" download="RESTORED_${f.name.replace('.nxa', '.jpg')}" 
                                   class="bg-[var(--nexa-neon)] text-black px-10 py-4 rounded-full text-xs font-black orbitron hover:scale-105 transition shadow-lg">
                                   Ø§Ø³ØªØ®Ø±Ø§Ø¬ ÙƒÙ€ JPG (Ù†Ø³Ø®Ø© Ø³ÙÙŠØ±Ø©)
                                </a>
                            </div>
                            <p class="text-[9px] text-gray-500 italic mt-4 font-bold tracking-widest uppercase">Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…Ø³ØªØ®Ø±Ø¬ ÙŠØ­Ù…Ù„ Ø§Ù„Ù€ DNA Ø§Ù„Ø±Ù‚Ù…ÙŠ Ù„Ù„Ø±ØµØ¯ Ø§Ù„Ø¬Ù†Ø§Ø¦ÙŠ</p>
                        </div>
                    `;
                } else {
                    addLog("ğŸš¨ Ø§Ø®ØªØ±Ø§Ù‚ Ø£Ù…Ù†ÙŠ: Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…Ø±ÙÙˆØ¹ Ù„Ø§ ÙŠÙ…Ù„Ùƒ Ø¨ØµÙ…Ø© Ø§Ù„Ø³ÙŠØ§Ø¯Ø©!", "red");
                    out.classList.remove('hidden');
                    out.innerHTML = `<h3 class="text-red-600 font-black orbitron">ACCESS_DENIED: UNAUTHORIZED_DATA</h3>`;
                }
            };
            reader.readAsArrayBuffer(f);
        };

        function findImageStart(v, offset) {
            for(let i = offset; i < offset + 200; i++) {
                if(v[i] === 0xFF && v[i+1] === 0xD8) return i; // JPEG
                if(v[i] === 0x89 && v[i+1] === 0x50) return i; // PNG
            }
            return offset;
        }
    </script>
</body>
</html>
